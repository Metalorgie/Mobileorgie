{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "Lives"
    },
    "designerId": "441a1a83-6ceb-4d8a-a86b-0064abf94cd0",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onViewActivated",
                "implHandler": [
                    "var me = this;\r",
                    "// use Metalorgie to get release\r",
                    "me.getLocation(function (location) {\r",
                    "    me.getLives(location, function (store) {\r",
                    "        //if (!store.loaded){\r",
                    "        Ext.Viewport.setMasked({ message: 'Chargement...' });\r",
                    "        // then bind data to list and show it\r",
                    "        me.getLivesDataList().setStore(store);\r",
                    "        Ext.Viewport.setMasked(false);\r",
                    "        //}\r",
                    "    });\r",
                    "});"
                ],
                "name": "activate",
                "designer|targetType": "Ext.Container",
                "designer|controlQuery": "#livesTab"
            },
            "designerId": "05f7d989-8c97-4aef-849d-65df35a6b388"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getLives",
                "designer|params": [
                    "location",
                    "callback"
                ],
                "implHandler": [
                    "var store = Ext.data.StoreManager.lookup('LivesStore');\r",
                    "store.filter([\r",
                    "\tExt.create('Ext.util.Filter', {property: \"lat\", value: location.coords.latitude})\r",
                    "]);\r",
                    "store.filter([\r",
                    "\tExt.create('Ext.util.Filter', {property: \"long\", value: location.coords.longitude})\r",
                    "]);\r",
                    "store.load(function() {\r",
                    "    callback(store);\r",
                    "});"
                ]
            },
            "designerId": "d96679f9-cb9f-4996-9b84-1e103d682e61"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getLocation",
                "designer|params": [
                    "callback"
                ],
                "implHandler": [
                    "if (navigator && navigator.geolocation) {\r",
                    "    navigator.geolocation.getCurrentPosition(function(position) {\r",
                    "        callback(position);\r",
                    "    }, function(error) {\r",
                    "        // give a warning for error\r",
                    "    });\r",
                    "}"
                ]
            },
            "designerId": "70eb552d-ec62-4d30-8f04-fcd22d7af532"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "livesTab",
                "selector": "#livesTab"
            },
            "designerId": "869268c8-e893-44a2-8d96-ad4b2b9efc49"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "livesDataList",
                "selector": "#livesDataList"
            },
            "designerId": "7e607b47-b5a7-4f87-9e5e-3da55feceed4"
        }
    ]
}